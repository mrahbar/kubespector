stages:
    - build

compile:
    stage: build
    script:
        - docker run --rm -v $(shell pwd):/go/src/github.com/mrahbar/kubernetes-inspector -w /go/src/github.com/mrahbar/kubernetes-inspector -e CGO_ENABLED=0 golang-glide:1.8 glide install
        - docker run --rm -v $(shell pwd):/go/src/github.com/mrahbar/kubernetes-inspector -w /go/src/github.com/mrahbar/kubernetes-inspector -e CGO_ENABLED=0 golang-glide:1.8 go build -a -installsuffix cgo -ldflags "-w" -o builds/kubernetes-inspector-1.1.3-SNAPSHOT *.go
    artifacts:
        paths:
            - mybinary
